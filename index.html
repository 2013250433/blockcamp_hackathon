<!DOCTYPE HTML>
<!--
	Massively by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Blood Certificate</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
		<style>
			.cutton {
			background-color: #4CAF50; /* Green */
		border: none;
		color: white;
		padding: 15px 32px;
		text-align: center;
		text-decoration: none;
		display: inline-block;
		font-size: 16px;
		margin: 4px 2px;
		cursor: pointer;}
			 .cutton2 {background-color: #f44336;} /* Red */
			 
		</style>
		
		
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper" class="fade-in">

				<!-- Intro -->
					<div id="intro">
						<h1>'호진'님의 혈액증서<br />
						입니다.</h1>
						<p>블록체인 토큰으로 새롭게 개편된 헌혈 증서 시스템 ! <br/>
						언제든지 쉽고 빠르게 조회하세요 !</p>
						<ul class="actions">
							<li><a href="#header" class="button icon solo fa-arrow-down scrolly">Continue</a></li>
						</ul>
					</div>

				<!-- Header -->
					<header id="header">
						<a href="index.html" class="logo">'호진'의 혈액증서 입니다.</a>
					</header>

				<!-- Nav -->
					<nav id="nav">
						<ul class="links">
							<li class="active"><a href="index.html">나의 헌혈 증서</a></li>
							<li><a href="generic.html">헌혈 증서 기부하기</a></li>
						</ul>
						<ul class="icons">
							<li><a href="#" class="icon fa-twitter"><span class="label">Twitter</span></a></li>
							<li><a href="#" class="icon fa-facebook"><span class="label">Facebook</span></a></li>
							<li><a href="#" class="icon fa-instagram"><span class="label">Instagram</span></a></li>
							<li><a href="#" class="icon fa-github"><span class="label">GitHub</span></a></li>
						</ul>
					</nav>

				<!-- Main -->
					<div id="main">

						<!-- Featured Post 
							<article class="post featured">
								<header class="major">
									<span class="date">April 25, 2017</span>
									<h2><a href="#">And this is a<br />
									massive headline</a></h2>
									<p>Aenean ornare velit lacus varius enim ullamcorper proin aliquam<br />
									facilisis ante sed etiam magna interdum congue. Lorem ipsum dolor<br />
									amet nullam sed etiam veroeros.</p>
								</header>
								<a href="#" class="image main"><img src="images/pic01.jpg" alt="" /></a>
								<ul class="actions special">
									<li><a href="#" class="button large">Full Story</a></li>
								</ul>
							</article>
						-->
						<!-- Posts -->
							<section id="parseresult" class="posts">
														
							
	<script src="https://cdn.ethers.io/scripts/ethers-v4.min.js" charset="utf-8" type="text/javascript"></script>
  	<script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js/dist/web3.min.js"></script>						
	
	
    <script>
        web3 = new Web3(new Web3.providers.HttpProvider("https://ropsten.infura.io"));
        var contract = web3.eth.contract([{
                "constant": false,
                "inputs": [{
                        "name": "_from",
                        "type": "address"
                    },
                    {
                        "name": "_to",
                        "type": "address"
                    },
                    {
                        "name": "_tokenId",
                        "type": "uint256"
                    }
                ],
                "name": "transferFrom",
                "outputs": [],
                "payable": false,
                "stateMutability": "nonpayable",
                "type": "function"
            },
            {
                "constant": true,
                "inputs": [{
                    "name": "",
                    "type": "address"
                }],
                "name": "ownerCertCount",
                "outputs": [{
                    "name": "",
                    "type": "uint256"
                }],
                "payable": false,
                "stateMutability": "view",
                "type": "function"
            },
            {
                "constant": false,
                "inputs": [{
                        "name": "name",
                        "type": "string"
                    },
                    {
                        "name": "certType",
                        "type": "string"
                    },
                    {
                        "name": "time",
                        "type": "uint256"
                    },
                    {
                        "name": "gender",
                        "type": "uint8"
                    },
                    {
                        "name": "bloodType",
                        "type": "uint8"
                    }
                ],
                "name": "registerCard",
                "outputs": [],
                "payable": false,
                "stateMutability": "nonpayable",
                "type": "function"
            },
            {
                "constant": true,
                "inputs": [{
                    "name": "_tokenId",
                    "type": "uint256"
                }],
                "name": "ownerOf",
                "outputs": [{
                    "name": "owner",
                    "type": "address"
                }],
                "payable": false,
                "stateMutability": "view",
                "type": "function"
            },
            {
                "constant": true,
                "inputs": [{
                    "name": "",
                    "type": "uint256"
                }],
                "name": "certOwnerMapping",
                "outputs": [{
                    "name": "",
                    "type": "address"
                }],
                "payable": false,
                "stateMutability": "view",
                "type": "function"
            },
            {
                "constant": true,
                "inputs": [{
                    "name": "_owner",
                    "type": "address"
                }],
                "name": "balanceOf",
                "outputs": [{
                    "name": "balance",
                    "type": "uint256"
                }],
                "payable": false,
                "stateMutability": "view",
                "type": "function"
            },
            {
                "constant": false,
                "inputs": [{
                        "name": "_to",
                        "type": "address"
                    },
                    {
                        "name": "_tokenId",
                        "type": "uint256"
                    }
                ],
                "name": "transfer",
                "outputs": [],
                "payable": false,
                "stateMutability": "nonpayable",
                "type": "function"
            },
            {
                "constant": true,
                "inputs": [{
                    "name": "_owner",
                    "type": "address"
                }],
                "name": "getUserCard",
                "outputs": [{
                    "name": "",
                    "type": "uint256[]"
                }],
                "payable": false,
                "stateMutability": "view",
                "type": "function"
            },
            {
                "anonymous": false,
                "inputs": [{
                        "indexed": true,
                        "name": "_from",
                        "type": "address"
                    },
                    {
                        "indexed": true,
                        "name": "_to",
                        "type": "address"
                    },
                    {
                        "indexed": true,
                        "name": "_tokenId",
                        "type": "uint256"
                    }
                ],
                "name": "Transfer",
                "type": "event"
            },
            {
                "anonymous": false,
                "inputs": [{
                        "indexed": false,
                        "name": "owner",
                        "type": "address"
                    },
                    {
                        "indexed": false,
                        "name": "id",
                        "type": "uint256"
                    }
                ],
                "name": "CreateCert",
                "type": "event"
            }
        ]).at("0xa1Eb185D6De5Eb4FA43a4A52a7AFfF1c3E7D6556");
        web3.eth.defaultAccount = web3.eth.accounts[0];

        var userAccount = "0x2621e1dab1dcd6669522d3fe688322372d78b2ef";
		
        console.log(userAccount);
        var accountInterval = setInterval(function () {
            $("#parseresult").empty();
            // Check if account has changed
            //alert("called!");

            // Call a function to update the UI with the new account
            var usercard = contract.getUserCard(userAccount);
            for (time of usercard) {
                $("#parseresult").append(
								`<article>
									<header>
										<h2><a href="#">${time.valueOf()}월에 받은 헌혈증서 입니다!<br/></a></h2>
									</header>
									
									<a href="#" class="image fit"><img src="images/bloodcard01.jpg" alt="" /></a>
									<h4>
									<p>헌혈해 주셔서 감사합니다! ^^</p>
									</h4>
									<a class="cutton">사용 가능</a>
									
								</article>`
                );
            };
        }, 3000);
		<!-- a class="cutton cutton2">사용 불가</a -->
								
    </script>
									
								<!-- adding json parser-->
								
								<!-- -->
								
								<!--
								<article>
									<header>
										<span class="date">April 22, 2017</span>
										<h2><a href="#">Primis eget<br />
										imperdiet lorem</a></h2>
									</header>
									<a href="#" class="image fit"><img src="images/pic03.jpg" alt="" /></a>
									<p>Donec eget ex magna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Pellentesque venenatis dolor imperdiet dolor mattis sagittis magna etiam.</p>
									<ul class="actions special">
										<li><a href="#" class="button">Full Story</a></li>
									</ul>
								</article>
								<article>
									<header>
										<span class="date">April 18, 2017</span>
										<h2><a href="#">Ante mattis<br />
										interdum dolor</a></h2>
									</header>
									<a href="#" class="image fit"><img src="images/pic04.jpg" alt="" /></a>
									<p>Donec eget ex magna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Pellentesque venenatis dolor imperdiet dolor mattis sagittis magna etiam.</p>
									<ul class="actions special">
										<li><a href="#" class="button">Full Story</a></li>
									</ul>
								</article>
								<article>
									<header>
										<span class="date">April 14, 2017</span>
										<h2><a href="#">Tempus sed<br />
										nulla imperdiet</a></h2>
									</header>
									<a href="#" class="image fit"><img src="images/pic05.jpg" alt="" /></a>
									<p>Donec eget ex magna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Pellentesque venenatis dolor imperdiet dolor mattis sagittis magna etiam.</p>
									<ul class="actions special">
										<li><a href="#" class="button">Full Story</a></li>
									</ul>
								</article>
								<article>
									<header>
										<span class="date">April 11, 2017</span>
										<h2><a href="#">Odio magna<br />
										sed consectetur</a></h2>
									</header>
									<a href="#" class="image fit"><img src="images/pic06.jpg" alt="" /></a>
									<p>Donec eget ex magna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Pellentesque venenatis dolor imperdiet dolor mattis sagittis magna etiam.</p>
									<ul class="actions special">
										<li><a href="#" class="button">Full Story</a></li>
									</ul>
								</article>
								<article>
									<header>
										<span class="date">April 7, 2017</span>
										<h2><a href="#">Augue lorem<br />
										primis vestibulum</a></h2>
									</header>
									<a href="#" class="image fit"><img src="images/pic07.jpg" alt="" /></a>
									<p>Donec eget ex magna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Pellentesque venenatis dolor imperdiet dolor mattis sagittis magna etiam.</p>
									<ul class="actions special">
										<li><a href="#" class="button">Full Story</a></li>
									</ul>
								</article>
								-->
							</section>
							
							
						<!-- Footer -->
						<script>
						/*
								<footer>
								<div class="pagination">
									<!--<a href="#" class="previous">Prev</a>-->
									<a href="#" class="page active">1</a>
									<a href="#" class="page">2</a>
									<a href="#" class="page">3</a>
									<span class="extra">&hellip;</span>
									<a href="#" class="page">8</a>
									<a href="#" class="page">9</a>
									<a href="#" class="page">10</a>
									<a href="#" class="next">Next</a>
								</div>
							</footer>
						*/
						</script>
						
						
						


					</div>

				<!-- Footer -->
					<footer id="footer">
						<section>
							<form method="post" action="#">
								<div class="fields">
									<div class="field">
										<label for="name">Name</label>
										<input type="text" name="name" id="name" />
									</div>
									<div class="field">
										<label for="email">Email</label>
										<input type="text" name="email" id="email" />
									</div>
									<div class="field">
										<label for="message">Message</label>
										<textarea name="message" id="message" rows="3"></textarea>
									</div>
								</div>
								<ul class="actions">
									<li><input type="submit" value="Send Message" /></li>
								</ul>
							</form>
						</section>
						<section class="split contact">
							<section class="alt">
								<h3>Address</h3>
								<p>1234 Somewhere Road #87257<br />
								Nashville, TN 00000-0000</p>
							</section>
							<section>
								<h3>Phone</h3>
								<p><a href="#">(000) 000-0000</a></p>
							</section>
							<section>
								<h3>Email</h3>
								<p><a href="#">info@untitled.tld</a></p>
							</section>
							<section>
								<h3>Social</h3>
								<ul class="icons alt">
									<li><a href="#" class="icon alt fa-twitter"><span class="label">Twitter</span></a></li>
									<li><a href="#" class="icon alt fa-facebook"><span class="label">Facebook</span></a></li>
									<li><a href="#" class="icon alt fa-instagram"><span class="label">Instagram</span></a></li>
									<li><a href="#" class="icon alt fa-github"><span class="label">GitHub</span></a></li>
								</ul>
							</section>
						</section>
					</footer>

				<!-- Copyright -->
					<div id="copyright">
						<ul><li>&copy; Untitled</li><li>Design: <a href="https://html5up.net">HTML5 UP</a></li></ul>
					</div>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
			<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>

	</body>
</html>

<!-- scripts 
<script>
								/*
								//var section = document.querySelector();
								var	mainID = document.getElementById("main");
								//var sectionPost = document.getElementById("posts");
								//var sectionPost2 = mainID.getElementsByClassName("posts");
								var sectionPost3 = mainID.getElementsByTagName("section");
								//alert(sectionPost3);
								var sectionPost4 = document.getElementById("main").getElementsByTagName("section");
								var sectionPost5 = document.getElementById("main");
								*/
								var sectionPost6 = document.getElementById("certs");
								
								var requestURL = 'https://raw.githubusercontent.com/2013250433/blockcamp_hackathon/master/assets/json/blood_cert2.json';
								var requestURL2 = 'https://mdn.github.io/learning-area/javascript/oojs/json/superheroes.json';
								var request = new XMLHttpRequest();
								request.open('GET', requestURL);
								request.responseType = 'json';
								request.send();
	
								request.onload = function(){
								var result = request.response;
									//populateHeader(result);
									//showData(result);
									//shortData(result);
								}
								
								function showData(jsonObj){
									var data = jsonObj['members'];
									for(var i=0;i<data.length;i++){
										var myArticle = document.createElement('article');
										var myH2 = document.createElement('h2');
										var myPara1 = document.createElement('p');
										var myImage = document.createElement('img');
										var myA = document.createElement('a');
										var myButton = document.createElement('a');
																			//<a class="cutton">사용 불가</a>
										
										myH2.textContent = data[i].name;
										myPara1.textContent = 'Secret identity: ' + data[i].secretIdentity;
										
										myImage.setAttribute('src','images/bloodcard01.jpg');
										
										//<a href="#" class="image fit">
										myA.setAttribute('class',"image fit");
										
										myArticle.appendChild(myH2);
										myArticle.appendChild(myPara1);
										
										myA.appendChild(myImage);
										myArticle.appendChild(myA);
										//myArticle.appendChild(myImage);
										//myArticle.appendChild(myA);
										
										myButton.setAttribute('class',"cutton");
										myButton.textContent = '사용 가능';
										myArticle.appendChild(myButton);
										
										sectionPost6.appendChild(myArticle);
										
										//sectionPost3.appendChild(myArticle);
										//mainID.appendChild(myArticle); 됨
									}
								}
								
								
								//alert(Bcert.dateOf('0x8bfc14cd62da7bad4352c08bf0f487e77f7042f8'));
								
								</script>
-->